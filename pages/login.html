<!-- Na se√ß√£o de scripts do login.html, substitua por: -->
<script src="../js/supabase.js"></script>
<script src="../js/auth.js"></script>
<script src="../js/main.js"></script>
<script src="../js/forms.js"></script>

<script>
    document.getElementById('current-year').textContent = new Date().getFullYear();
    
    document.addEventListener('DOMContentLoaded', async () => {
        console.log('üîê Inicializando p√°gina de login...');
        
        // Aguardar m√≥dulos
        await new Promise(resolve => {
            const check = () => {
                if (window.supabaseClient && window.auth && window.db && window.forms && window.utils) {
                    resolve();
                } else {
                    setTimeout(check, 100);
                }
            };
            check();
        });
        
        // Configurar abas
        const tabBtns = document.querySelectorAll('.tab-btn');
        const tabContents = document.querySelectorAll('.tab-content');
        const hash = window.location.hash;
        
        if (hash === '#register') {
            tabBtns.forEach(btn => btn.classList.remove('active'));
            tabContents.forEach(content => content.classList.remove('active'));
            document.querySelector('[data-tab="register"]').classList.add('active');
            document.getElementById('register-tab').classList.add('active');
                const yearElement = document.getElementById('current-year');
    if (yearElement) {
        yearElement.textContent = new Date().getFullYear();
        }
        
        tabBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const tabId = btn.getAttribute('data-tab');
                tabBtns.forEach(b => b.classList.remove('active'));
                tabContents.forEach(c => c.classList.remove('active'));
                
                btn.classList.add('active');
                document.getElementById(`${tabId}-tab`).classList.add('active');
                window.location.hash = tabId === 'register' ? 'register' : '';
            });
        });
        
        // Inicializar formul√°rios
        forms.initLoginForm();
        forms.initRegisterForm();
        
        // Atualizar UI de autentica√ß√£o
        await auth.updateAuthUI();
        
        console.log('‚úÖ P√°gina de login inicializada');
    });
</script>
